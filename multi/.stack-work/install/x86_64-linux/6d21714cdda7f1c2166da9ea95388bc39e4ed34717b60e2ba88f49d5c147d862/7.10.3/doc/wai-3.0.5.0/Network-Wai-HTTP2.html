<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Network.Wai.HTTP2</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Network-Wai-HTTP2.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">wai-3.0.5.0: Web Application Interface.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell98</td></tr></table><p class="caption">Network.Wai.HTTP2</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Applications</a></li><li><a href="#g:2">Responder</a></li><li><a href="#g:3">Server push</a></li><li><a href="#g:4">Conveniences</a><ul><li><a href="#g:5">Responders</a></li><li><a href="#g:6">Stream Bodies</a></li></ul></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>An HTTP/2-aware variant of the <code><a href="Network-Wai.html#t:Application">Application</a></code> type.  Compared
 to the original, this exposes the new functionality of server push and
 trailers, allows stream fragments to be sent in the form of file ranges, and
 allows the stream body to produce a value to be used in constructing the
 trailers.  Existing <code>Applications</code> can be faithfully upgraded to HTTP/2
 with <code><a href="Network-Wai-HTTP2.html#v:promoteApplication">promoteApplication</a></code> or served transparently over both protocols with
 the normal Warp <code><a href="Network-Wai-Handler-Warp.html#v:run">run</a></code> family of functions.</p><p>An <code><a href="Network-Wai-HTTP2.html#t:HTTP2Application">HTTP2Application</a></code> takes a <code><a href="Network-Wai.html#t:Request">Request</a></code> and a <code><a href="Network-Wai-HTTP2.html#t:PushFunc">PushFunc</a></code> and produces a
 <code><a href="Network-Wai-HTTP2.html#t:Responder">Responder</a></code> that will push any associated resources and send the response
 body.  The response is always a stream of <code><a href="../blaze-builder-0.4.0.1/Blaze-ByteString-Builder.html#t:Builder">Builder</a></code>s and file chunks.
 Equivalents of the <code><a href="Network-Wai.html#v:responseBuilder">responseBuilder</a></code> family of functions are
 provided for creating <code><a href="Network-Wai-HTTP2.html#t:Responder">Responder</a></code>s conveniently.</p><p>Pushed streams are handled by an IO action that triggers a server push.  It
 returns <code>True</code> if the <code>PUSH_PROMISE</code> frame was sent, <code>False</code> if not.  Note
 this means it will still return <code>True</code> if the client reset or ignored the
 stream.  This gives handlers the freedom to implement their own heuristics
 for whether to actually push a resource, while also allowing middleware and
 frameworks to trigger server pushes automatically.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">type</span> <a href="#t:HTTP2Application">HTTP2Application</a> = <a href="Network-Wai.html#t:Request">Request</a> -&gt; <a href="Network-Wai-HTTP2.html#t:PushFunc">PushFunc</a> -&gt; <a href="Network-Wai-HTTP2.html#t:Responder">Responder</a></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:Responder">Responder</a> = <a href="#v:Responder">Responder</a> {<ul class="subs"><li><a href="#v:runResponder">runResponder</a> :: <span class="keyword">forall</span> s. <a href="Network-Wai-HTTP2.html#t:RespondFunc">RespondFunc</a> s -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> s</li></ul>}</li><li class="src short"><span class="keyword">type</span> <a href="#t:RespondFunc">RespondFunc</a> s = <a href="../http-types-0.9/Network-HTTP-Types-Status.html#t:Status">Status</a> -&gt; <a href="../http-types-0.9/Network-HTTP-Types-Header.html#t:ResponseHeaders">ResponseHeaders</a> -&gt; <a href="Network-Wai-HTTP2.html#t:Body">Body</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> s</li><li class="src short"><span class="keyword">type</span> <a href="#t:Body">Body</a> = (<a href="Network-Wai-HTTP2.html#t:Chunk">Chunk</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()) -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> () -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Network-Wai-HTTP2.html#t:Trailers">Trailers</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:Chunk">Chunk</a><ul class="subs"><li>= <a href="#v:FileChunk">FileChunk</a> <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> <a href="Network-Wai.html#t:FilePart">FilePart</a></li><li>| <a href="#v:BuilderChunk">BuilderChunk</a> <a href="../blaze-builder-0.4.0.1/Blaze-ByteString-Builder.html#t:Builder">Builder</a></li></ul></li><li class="src short"><span class="keyword">type</span> <a href="#t:Trailers">Trailers</a> = [<a href="../http-types-0.9/Network-HTTP-Types-Header.html#t:Header">Header</a>]</li><li class="src short"><span class="keyword">type</span> <a href="#t:PushFunc">PushFunc</a> = <a href="Network-Wai-HTTP2.html#t:PushPromise">PushPromise</a> -&gt; <a href="Network-Wai-HTTP2.html#t:Responder">Responder</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:PushPromise">PushPromise</a> = <a href="#v:PushPromise">PushPromise</a> {<ul class="subs"><li><a href="#v:promisedMethod">promisedMethod</a> :: <a href="../http-types-0.9/Network-HTTP-Types-Method.html#t:Method">Method</a></li><li><a href="#v:promisedPath">promisedPath</a> :: <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></li><li><a href="#v:promisedAuthority">promisedAuthority</a> :: <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></li><li><a href="#v:promisedScheme">promisedScheme</a> :: <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></li><li><a href="#v:promisedHeader">promisedHeader</a> :: <a href="../http-types-0.9/Network-HTTP-Types-Header.html#t:RequestHeaders">RequestHeaders</a></li></ul>}</li><li class="src short"><a href="#v:promiseHeaders">promiseHeaders</a> :: <a href="Network-Wai-HTTP2.html#t:PushPromise">PushPromise</a> -&gt; <a href="../http-types-0.9/Network-HTTP-Types-Header.html#t:RequestHeaders">RequestHeaders</a></li><li class="src short"><a href="#v:promoteApplication">promoteApplication</a> :: <a href="Network-Wai.html#t:Application">Application</a> -&gt; <a href="Network-Wai-HTTP2.html#t:HTTP2Application">HTTP2Application</a></li><li class="src short"><a href="#v:respond">respond</a> :: <a href="../http-types-0.9/Network-HTTP-Types-Status.html#t:Status">Status</a> -&gt; <a href="../http-types-0.9/Network-HTTP-Types-Header.html#t:ResponseHeaders">ResponseHeaders</a> -&gt; <a href="Network-Wai-HTTP2.html#t:Body">Body</a> -&gt; <a href="Network-Wai-HTTP2.html#t:Responder">Responder</a></li><li class="src short"><a href="#v:respondCont">respondCont</a> :: (<span class="keyword">forall</span> r. <a href="../transformers-0.4.2.0/Control-Monad-Trans-Cont.html#t:ContT">ContT</a> r <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Network-Wai-HTTP2.html#t:Responder">Responder</a>) -&gt; <a href="Network-Wai-HTTP2.html#t:Responder">Responder</a></li><li class="src short"><a href="#v:respondIO">respondIO</a> :: <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Network-Wai-HTTP2.html#t:Responder">Responder</a> -&gt; <a href="Network-Wai-HTTP2.html#t:Responder">Responder</a></li><li class="src short"><a href="#v:respondFile">respondFile</a> :: <a href="../http-types-0.9/Network-HTTP-Types-Status.html#t:Status">Status</a> -&gt; <a href="../http-types-0.9/Network-HTTP-Types-Header.html#t:ResponseHeaders">ResponseHeaders</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../http-types-0.9/Network-HTTP-Types-Header.html#t:RequestHeaders">RequestHeaders</a> -&gt; <a href="Network-Wai-HTTP2.html#t:Responder">Responder</a></li><li class="src short"><a href="#v:respondFilePart">respondFilePart</a> :: <a href="../http-types-0.9/Network-HTTP-Types-Status.html#t:Status">Status</a> -&gt; <a href="../http-types-0.9/Network-HTTP-Types-Header.html#t:ResponseHeaders">ResponseHeaders</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Network-Wai.html#t:FilePart">FilePart</a> -&gt; <a href="Network-Wai-HTTP2.html#t:Responder">Responder</a></li><li class="src short"><a href="#v:respondNotFound">respondNotFound</a> :: <a href="../http-types-0.9/Network-HTTP-Types-Header.html#t:ResponseHeaders">ResponseHeaders</a> -&gt; <a href="Network-Wai-HTTP2.html#t:Responder">Responder</a></li><li class="src short"><a href="#v:respondWith">respondWith</a> :: (<span class="keyword">forall</span> s. (a -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> s) -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> s) -&gt; (a -&gt; <a href="Network-Wai-HTTP2.html#t:Responder">Responder</a>) -&gt; <a href="Network-Wai-HTTP2.html#t:Responder">Responder</a></li><li class="src short"><a href="#v:streamFilePart">streamFilePart</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Network-Wai.html#t:FilePart">FilePart</a> -&gt; <a href="Network-Wai-HTTP2.html#t:Body">Body</a></li><li class="src short"><a href="#v:streamBuilder">streamBuilder</a> :: <a href="../blaze-builder-0.4.0.1/Blaze-ByteString-Builder.html#t:Builder">Builder</a> -&gt; <a href="Network-Wai-HTTP2.html#t:Body">Body</a></li><li class="src short"><a href="#v:streamSimple">streamSimple</a> :: <a href="Network-Wai.html#t:StreamingBody">StreamingBody</a> -&gt; <a href="Network-Wai-HTTP2.html#t:Body">Body</a></li></ul></div><div id="interface"><h1 id="g:1">Applications</h1><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:HTTP2Application" class="def">HTTP2Application</a> = <a href="Network-Wai.html#t:Request">Request</a> -&gt; <a href="Network-Wai-HTTP2.html#t:PushFunc">PushFunc</a> -&gt; <a href="Network-Wai-HTTP2.html#t:Responder">Responder</a></p><div class="doc"><p>The HTTP/2-aware equivalent of <code><a href="Network-Wai.html#t:Application">Application</a></code>.</p></div></div><h1 id="g:2">Responder</h1><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:Responder" class="def">Responder</a></p><div class="doc"><p>The result of an <code><a href="Network-Wai-HTTP2.html#t:HTTP2Application">HTTP2Application</a></code>; or, alternately, an application
 that's independent of the request.  This is a continuation-passing style
 function that first provides a response by calling the given respond
 function, then returns the request's <code><a href="Network-Wai-HTTP2.html#t:Trailers">Trailers</a></code>.</p><p>The respond function is similar to the one in <code><a href="Network-Wai.html#t:Application">Application</a></code>, but
 it only takes a streaming body, the status and headers are curried, and it
 also produces trailers for the stream.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Responder" class="def">Responder</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:runResponder" class="def">runResponder</a> :: <span class="keyword">forall</span> s. <a href="Network-Wai-HTTP2.html#t:RespondFunc">RespondFunc</a> s -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> s</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:RespondFunc" class="def">RespondFunc</a> s = <a href="../http-types-0.9/Network-HTTP-Types-Status.html#t:Status">Status</a> -&gt; <a href="../http-types-0.9/Network-HTTP-Types-Header.html#t:ResponseHeaders">ResponseHeaders</a> -&gt; <a href="Network-Wai-HTTP2.html#t:Body">Body</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> s</p><div class="doc"><p>Given to <code>Responders</code>; provide a status, headers, and a stream body, and
 we'll give you a token proving you called the <code><a href="Network-Wai-HTTP2.html#t:RespondFunc">RespondFunc</a></code>.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Body" class="def">Body</a> = (<a href="Network-Wai-HTTP2.html#t:Chunk">Chunk</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()) -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> () -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Network-Wai-HTTP2.html#t:Trailers">Trailers</a></p><div class="doc"><p>The streaming body of a response.  Equivalent to
 <code><a href="Network-Wai.html#v:StreamingBody">StreamingBody</a></code> except that it can also write file ranges and
 return the stream's trailers.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Chunk" class="def">Chunk</a></p><div class="doc"><p>Part of a streaming response -- either a <code><a href="../blaze-builder-0.4.0.1/Blaze-ByteString-Builder.html#t:Builder">Builder</a></code> or a range of a file.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:FileChunk" class="def">FileChunk</a> <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> <a href="Network-Wai.html#t:FilePart">FilePart</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:BuilderChunk" class="def">BuilderChunk</a> <a href="../blaze-builder-0.4.0.1/Blaze-ByteString-Builder.html#t:Builder">Builder</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Trailers" class="def">Trailers</a> = [<a href="../http-types-0.9/Network-HTTP-Types-Header.html#t:Header">Header</a>]</p><div class="doc"><p>Headers sent after the end of a data stream, as defined by section 4.1.2 of
 the HTTP/1.1 spec (RFC 7230), and section 8.1 of the HTTP/2 spec.</p></div></div><h1 id="g:3">Server push</h1><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:PushFunc" class="def">PushFunc</a> = <a href="Network-Wai-HTTP2.html#t:PushPromise">PushPromise</a> -&gt; <a href="Network-Wai-HTTP2.html#t:Responder">Responder</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></p><div class="doc"><p>A function given to an <code><a href="Network-Wai-HTTP2.html#t:HTTP2Application">HTTP2Application</a></code> to initiate a server-pushed
 stream.  Its argument is the same as the result of an <code><a href="Network-Wai-HTTP2.html#t:HTTP2Application">HTTP2Application</a></code>, so
 you can either implement the response inline, or call your own application
 to create the response.</p><p>The result is <code><a href="../base-4.8.2.0/Data-Bool.html#v:True">True</a></code> if the <code>PUSH_PROMISE</code> frame will be sent, or <code><a href="../base-4.8.2.0/Data-Bool.html#v:False">False</a></code> if
 it will not.  This can happen if server push is disabled, the concurrency
 limit of server-initiated streams is reached, or the associated stream has
 already been closed.</p><p>This function shall ensure that stream data provided after it returns will
 be sent after the <code>PUSH_PROMISE</code> frame, so that servers can implement the
 requirement that any pushed stream for a resource be initiated before
 sending DATA frames that reference it.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:PushPromise" class="def">PushPromise</a></p><div class="doc"><p>The synthesized request and headers of a pushed stream.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:PushPromise" class="def">PushPromise</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:promisedMethod" class="def">promisedMethod</a> :: <a href="../http-types-0.9/Network-HTTP-Types-Method.html#t:Method">Method</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:promisedPath" class="def">promisedPath</a> :: <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:promisedAuthority" class="def">promisedAuthority</a> :: <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:promisedScheme" class="def">promisedScheme</a> :: <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:promisedHeader" class="def">promisedHeader</a> :: <a href="../http-types-0.9/Network-HTTP-Types-Header.html#t:RequestHeaders">RequestHeaders</a></dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div></div><div class="top"><p class="src"><a name="v:promiseHeaders" class="def">promiseHeaders</a> :: <a href="Network-Wai-HTTP2.html#t:PushPromise">PushPromise</a> -&gt; <a href="../http-types-0.9/Network-HTTP-Types-Header.html#t:RequestHeaders">RequestHeaders</a></p><div class="doc"><p>Create the <code><a href="../http-types-0.9/Network-HTTP-Types-Header.html#t:RequestHeaders">RequestHeaders</a></code> corresponding to the given <code><a href="Network-Wai-HTTP2.html#t:PushPromise">PushPromise</a></code>.</p><p>This is primarily useful for WAI handlers like Warp, and application
 implementers are unlikely to use it directly.</p></div></div><h1 id="g:4">Conveniences</h1><div class="top"><p class="src"><a name="v:promoteApplication" class="def">promoteApplication</a> :: <a href="Network-Wai.html#t:Application">Application</a> -&gt; <a href="Network-Wai-HTTP2.html#t:HTTP2Application">HTTP2Application</a></p><div class="doc"><p>Promote a normal WAI <code><a href="Network-Wai.html#t:Application">Application</a></code> to an <code><a href="Network-Wai-HTTP2.html#t:HTTP2Application">HTTP2Application</a></code> by ignoring
 the HTTP/2-specific features.</p></div></div><h2 id="g:5">Responders</h2><div class="top"><p class="src"><a name="v:respond" class="def">respond</a> :: <a href="../http-types-0.9/Network-HTTP-Types-Status.html#t:Status">Status</a> -&gt; <a href="../http-types-0.9/Network-HTTP-Types-Header.html#t:ResponseHeaders">ResponseHeaders</a> -&gt; <a href="Network-Wai-HTTP2.html#t:Body">Body</a> -&gt; <a href="Network-Wai-HTTP2.html#t:Responder">Responder</a></p><div class="doc"><p>Construct a <code><a href="Network-Wai-HTTP2.html#t:Responder">Responder</a></code> that will just call the <code><a href="Network-Wai-HTTP2.html#t:RespondFunc">RespondFunc</a></code> with the
 given arguments.</p></div></div><div class="top"><p class="src"><a name="v:respondCont" class="def">respondCont</a> :: (<span class="keyword">forall</span> r. <a href="../transformers-0.4.2.0/Control-Monad-Trans-Cont.html#t:ContT">ContT</a> r <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Network-Wai-HTTP2.html#t:Responder">Responder</a>) -&gt; <a href="Network-Wai-HTTP2.html#t:Responder">Responder</a></p><div class="doc"><p>Fold the <code><a href="../transformers-0.4.2.0/Control-Monad-Trans-Cont.html#t:ContT">ContT</a></code> into the contained <code><a href="Network-Wai-HTTP2.html#t:Responder">Responder</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:respondIO" class="def">respondIO</a> :: <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Network-Wai-HTTP2.html#t:Responder">Responder</a> -&gt; <a href="Network-Wai-HTTP2.html#t:Responder">Responder</a></p><div class="doc"><p>Fold the <code><a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a></code> into the contained <code><a href="Network-Wai-HTTP2.html#t:Responder">Responder</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:respondFile" class="def">respondFile</a> :: <a href="../http-types-0.9/Network-HTTP-Types-Status.html#t:Status">Status</a> -&gt; <a href="../http-types-0.9/Network-HTTP-Types-Header.html#t:ResponseHeaders">ResponseHeaders</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../http-types-0.9/Network-HTTP-Types-Header.html#t:RequestHeaders">RequestHeaders</a> -&gt; <a href="Network-Wai-HTTP2.html#t:Responder">Responder</a></p><div class="doc"><p>Serve the requested range of the specified file (based on the Range
 header), using the given <code><a href="../http-types-0.9/Network-HTTP-Types-Status.html#t:Status">Status</a></code> and <code><a href="../http-types-0.9/Network-HTTP-Types-Header.html#t:ResponseHeaders">ResponseHeaders</a></code> as a base.  If
 the file is not accessible, the status will be replaced with 404 and a
 default not-found message will be served.  If a partial file is requested,
 the status will be replaced with 206 and the Content-Range header will be
 added.  The Content-Length header will always be added.</p></div></div><div class="top"><p class="src"><a name="v:respondFilePart" class="def">respondFilePart</a> :: <a href="../http-types-0.9/Network-HTTP-Types-Status.html#t:Status">Status</a> -&gt; <a href="../http-types-0.9/Network-HTTP-Types-Header.html#t:ResponseHeaders">ResponseHeaders</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Network-Wai.html#t:FilePart">FilePart</a> -&gt; <a href="Network-Wai-HTTP2.html#t:Responder">Responder</a></p><div class="doc"><p>Respond with a single range of a file, adding the Accept-Ranges,
 Content-Length and Content-Range headers and changing the status to 206 as
 appropriate.</p><p>If you want the range to be inferred automatically from the Range header,
 use <code><a href="Network-Wai-HTTP2.html#v:respondFile">respondFile</a></code> instead.  On the other hand, if you want to avoid the
 automatic header and status adjustments, use <code><a href="Network-Wai-HTTP2.html#v:respond">respond</a></code> and <code><a href="Network-Wai-HTTP2.html#v:streamFilePart">streamFilePart</a></code>
 directly.</p></div></div><div class="top"><p class="src"><a name="v:respondNotFound" class="def">respondNotFound</a> :: <a href="../http-types-0.9/Network-HTTP-Types-Header.html#t:ResponseHeaders">ResponseHeaders</a> -&gt; <a href="Network-Wai-HTTP2.html#t:Responder">Responder</a></p><div class="doc"><p>Respond with a minimal 404 page with the given headers.</p></div></div><div class="top"><p class="src"><a name="v:respondWith" class="def">respondWith</a> :: (<span class="keyword">forall</span> s. (a -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> s) -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> s) -&gt; (a -&gt; <a href="Network-Wai-HTTP2.html#t:Responder">Responder</a>) -&gt; <a href="Network-Wai-HTTP2.html#t:Responder">Responder</a></p><div class="doc"><p>Fold the given bracketing action into a <code><a href="Network-Wai-HTTP2.html#t:Responder">Responder</a></code>.  Note the first
 argument is isomorphic to <code>Codensity IO a</code> or <code>forall s. ContT s IO a</code>, and
 is the type of a partially-applied <code><a href="../base-4.8.2.0/Control-Exception.html#v:bracket">bracket</a></code> or
 <code>with</code>-style function.</p><pre>respondWith (bracket acquire release) $
    \x -&gt; respondNotFound [(&quot;x&quot;, show x)]</pre><p>is equivalent to</p><pre>Responder $ \k -&gt; bracket acquire release $
    \x -&gt; runResponder (respondNotFound [(&quot;x&quot;, show x)] k</pre><p>This is morally equivalent to (<code><a href="../base-4.8.2.0/Control-Monad.html#v:-62--62--61-">&gt;&gt;=</a></code>) on <code>Codensity</code> <code><a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a></code>.</p></div></div><h2 id="g:6">Stream Bodies</h2><div class="top"><p class="src"><a name="v:streamFilePart" class="def">streamFilePart</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Network-Wai.html#t:FilePart">FilePart</a> -&gt; <a href="Network-Wai-HTTP2.html#t:Body">Body</a></p><div class="doc"><p>Create a response body consisting of a single range of a file.  Does not
 set Content-Length or Content-Range headers.  For that, use
 <code><a href="Network-Wai-HTTP2.html#v:respondFilePart">respondFilePart</a></code> or <code><a href="Network-Wai-HTTP2.html#v:respondFile">respondFile</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:streamBuilder" class="def">streamBuilder</a> :: <a href="../blaze-builder-0.4.0.1/Blaze-ByteString-Builder.html#t:Builder">Builder</a> -&gt; <a href="Network-Wai-HTTP2.html#t:Body">Body</a></p><div class="doc"><p>Create a response body consisting of a single builder.</p></div></div><div class="top"><p class="src"><a name="v:streamSimple" class="def">streamSimple</a> :: <a href="Network-Wai.html#t:StreamingBody">StreamingBody</a> -&gt; <a href="Network-Wai-HTTP2.html#t:Body">Body</a></p><div class="doc"><p>Create a response body of a stream of <code><a href="../blaze-builder-0.4.0.1/Blaze-ByteString-Builder.html#t:Builder">Builder</a></code>s.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>