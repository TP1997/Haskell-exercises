<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Network.Wai.Handler.Warp.Internal</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Network-Wai-Handler-Warp-Internal.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">warp-3.1.12: A fast, light-weight web server for WAI applications.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell98</td></tr></table><p class="caption">Network.Wai.Handler.Warp.Internal</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Settings</a></li><li><a href="#g:2">Low level run functions</a></li><li><a href="#g:3">ServeConnection</a></li><li><a href="#g:4">Connection</a><ul><li><a href="#g:5">Receive</a></li><li><a href="#g:6">Buffer</a></li><li><a href="#g:7">Sendfile</a></li></ul></li><li><a href="#g:8">Version</a></li><li><a href="#g:9">Data types</a></li><li><a href="#g:10">Time out manager</a><ul><li><a href="#g:11">Types</a></li><li><a href="#g:12">Manager</a></li><li><a href="#g:13">Registration</a></li><li><a href="#g:14">Control</a></li><li><a href="#g:15">Exceptions</a></li></ul></li><li><a href="#g:16">File descriptor cache</a></li><li><a href="#g:17">File information cache</a></li><li><a href="#g:18">Date</a></li><li><a href="#g:19">Request and response</a></li></ul></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:Settings">Settings</a> = <a href="#v:Settings">Settings</a> {<ul class="subs"><li><a href="#v:settingsPort">settingsPort</a> :: <a href="Network-Wai-Handler-Warp.html#t:Port">Port</a></li><li><a href="#v:settingsHost">settingsHost</a> :: <a href="Network-Wai-Handler-Warp.html#t:HostPreference">HostPreference</a></li><li><a href="#v:settingsOnException">settingsOnException</a> :: <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../wai-3.0.5.0/Network-Wai.html#t:Request">Request</a> -&gt; <a href="../base-4.8.2.0/Control-Exception-Base.html#t:SomeException">SomeException</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li><a href="#v:settingsOnExceptionResponse">settingsOnExceptionResponse</a> :: <a href="../base-4.8.2.0/Control-Exception-Base.html#t:SomeException">SomeException</a> -&gt; <a href="../wai-3.0.5.0/Network-Wai.html#t:Response">Response</a></li><li><a href="#v:settingsOnOpen">settingsOnOpen</a> :: <a href="../network-2.6.2.1/Network-Socket-Internal.html#t:SockAddr">SockAddr</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></li><li><a href="#v:settingsOnClose">settingsOnClose</a> :: <a href="../network-2.6.2.1/Network-Socket-Internal.html#t:SockAddr">SockAddr</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li><a href="#v:settingsTimeout">settingsTimeout</a> :: <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></li><li><a href="#v:settingsManager">settingsManager</a> :: <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:Manager">Manager</a></li><li><a href="#v:settingsFdCacheDuration">settingsFdCacheDuration</a> :: <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></li><li><a href="#v:settingsFileInfoCacheDuration">settingsFileInfoCacheDuration</a> :: <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></li><li><a href="#v:settingsBeforeMainLoop">settingsBeforeMainLoop</a> :: <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li><a href="#v:settingsFork">settingsFork</a> :: ((<span class="keyword">forall</span> a. <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> a -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> a) -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()) -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li><a href="#v:settingsNoParsePath">settingsNoParsePath</a> :: <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></li><li><a href="#v:settingsInstallShutdownHandler">settingsInstallShutdownHandler</a> :: <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> () -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li><a href="#v:settingsServerName">settingsServerName</a> :: <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></li><li><a href="#v:settingsMaximumBodyFlush">settingsMaximumBodyFlush</a> :: <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></li><li><a href="#v:settingsProxyProtocol">settingsProxyProtocol</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:ProxyProtocol">ProxyProtocol</a></li><li><a href="#v:settingsSlowlorisSize">settingsSlowlorisSize</a> :: <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></li><li><a href="#v:settingsHTTP2Enabled">settingsHTTP2Enabled</a> :: <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></li><li><a href="#v:settingsLogger">settingsLogger</a> :: <a href="../wai-3.0.5.0/Network-Wai.html#t:Request">Request</a> -&gt; <a href="../http-types-0.9/Network-HTTP-Types-Status.html#t:Status">Status</a> -&gt; <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.8.2.0/Prelude.html#t:Integer">Integer</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:ProxyProtocol">ProxyProtocol</a><ul class="subs"><li>= <a href="#v:ProxyProtocolNone">ProxyProtocolNone</a></li><li>| <a href="#v:ProxyProtocolRequired">ProxyProtocolRequired</a></li><li>| <a href="#v:ProxyProtocolOptional">ProxyProtocolOptional</a></li></ul></li><li class="src short"><a href="#v:runSettingsConnection">runSettingsConnection</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Settings">Settings</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="Network-Wai-Handler-Warp-Internal.html#t:Connection">Connection</a>, <a href="../network-2.6.2.1/Network-Socket-Internal.html#t:SockAddr">SockAddr</a>) -&gt; <a href="../wai-3.0.5.0/Network-Wai.html#t:Application">Application</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:runSettingsConnectionMaker">runSettingsConnectionMaker</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Settings">Settings</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:Connection">Connection</a>, <a href="../network-2.6.2.1/Network-Socket-Internal.html#t:SockAddr">SockAddr</a>) -&gt; <a href="../wai-3.0.5.0/Network-Wai.html#t:Application">Application</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:runSettingsConnectionMakerSecure">runSettingsConnectionMakerSecure</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Settings">Settings</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="Network-Wai-Handler-Warp-Internal.html#t:Connection">Connection</a>, <a href="Network-Wai-Handler-Warp-Internal.html#t:Transport">Transport</a>), <a href="../network-2.6.2.1/Network-Socket-Internal.html#t:SockAddr">SockAddr</a>) -&gt; <a href="../wai-3.0.5.0/Network-Wai.html#t:Application">Application</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:runServe">runServe</a> :: <a href="Network-Wai-Handler-Warp.html#t:Port">Port</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:ServeConnection">ServeConnection</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:runServeEnv">runServeEnv</a> :: <a href="Network-Wai-Handler-Warp.html#t:Port">Port</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:ServeConnection">ServeConnection</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:runServeSettings">runServeSettings</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Settings">Settings</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:ServeConnection">ServeConnection</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:runServeSettingsSocket">runServeSettingsSocket</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Settings">Settings</a> -&gt; <a href="../network-2.6.2.1/Network-Socket.html#t:Socket">Socket</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:ServeConnection">ServeConnection</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:runServeSettingsConnection">runServeSettingsConnection</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Settings">Settings</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="Network-Wai-Handler-Warp-Internal.html#t:Connection">Connection</a>, <a href="../network-2.6.2.1/Network-Socket-Internal.html#t:SockAddr">SockAddr</a>) -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:ServeConnection">ServeConnection</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:runServeSettingsConnectionMaker">runServeSettingsConnectionMaker</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Settings">Settings</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:Connection">Connection</a>, <a href="../network-2.6.2.1/Network-Socket-Internal.html#t:SockAddr">SockAddr</a>) -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:ServeConnection">ServeConnection</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:runServeSettingsConnectionMakerSecure">runServeSettingsConnectionMakerSecure</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Settings">Settings</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="Network-Wai-Handler-Warp-Internal.html#t:Connection">Connection</a>, <a href="Network-Wai-Handler-Warp-Internal.html#t:Transport">Transport</a>), <a href="../network-2.6.2.1/Network-Socket-Internal.html#t:SockAddr">SockAddr</a>) -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:ServeConnection">ServeConnection</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:Transport">Transport</a><ul class="subs"><li>= <a href="#v:TCP">TCP</a></li><li>| <a href="#v:TLS">TLS</a> { <ul class="subs"><li><a href="#v:tlsMajorVersion">tlsMajorVersion</a> :: <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></li><li><a href="#v:tlsMinorVersion">tlsMinorVersion</a> :: <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></li><li><a href="#v:tlsNegotiatedProtocol">tlsNegotiatedProtocol</a> :: <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></li><li><a href="#v:tlsChiperID">tlsChiperID</a> :: <a href="../base-4.8.2.0/Data-Word.html#t:Word16">Word16</a></li></ul> }</li></ul></li><li class="src short"><span class="keyword">type</span> <a href="#t:ServeConnection">ServeConnection</a> = <a href="Network-Wai-Handler-Warp-Internal.html#t:Connection">Connection</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:InternalInfo">InternalInfo</a> -&gt; <a href="../network-2.6.2.1/Network-Socket-Internal.html#t:SockAddr">SockAddr</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:Transport">Transport</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:Settings">Settings</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:serveDefault">serveDefault</a> :: <a href="../wai-3.0.5.0/Network-Wai.html#t:Application">Application</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:ServeConnection">ServeConnection</a></li><li class="src short"><a href="#v:serveHTTP2">serveHTTP2</a> :: <a href="../wai-3.0.5.0/Network-Wai-HTTP2.html#t:HTTP2Application">HTTP2Application</a> -&gt; <a href="../wai-3.0.5.0/Network-Wai.html#t:Application">Application</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:ServeConnection">ServeConnection</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:Connection">Connection</a> = <a href="#v:Connection">Connection</a> {<ul class="subs"><li><a href="#v:connSendMany">connSendMany</a> :: [<a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a>] -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li><a href="#v:connSendAll">connSendAll</a> :: <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li><a href="#v:connSendFile">connSendFile</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:SendFile">SendFile</a></li><li><a href="#v:connClose">connClose</a> :: <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li><a href="#v:connRecv">connRecv</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Recv">Recv</a></li><li><a href="#v:connRecvBuf">connRecvBuf</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:RecvBuf">RecvBuf</a></li><li><a href="#v:connWriteBuffer">connWriteBuffer</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Buffer">Buffer</a></li><li><a href="#v:connBufferSize">connBufferSize</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:BufSize">BufSize</a></li></ul>}</li><li class="src short"><a href="#v:socketConnection">socketConnection</a> :: <a href="../network-2.6.2.1/Network-Socket.html#t:Socket">Socket</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:Connection">Connection</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:Recv">Recv</a> = <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:RecvBuf">RecvBuf</a> = <a href="Network-Wai-Handler-Warp-Internal.html#t:Buffer">Buffer</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:BufSize">BufSize</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:makePlainReceiveN">makePlainReceiveN</a> :: <a href="../network-2.6.2.1/Network-Socket.html#t:Socket">Socket</a> -&gt; <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="Network-Wai-Handler-Warp-Internal.html#t:BufSize">BufSize</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a>)</li><li class="src short"><span class="keyword">type</span> <a href="#t:Buffer">Buffer</a> = <a href="../base-4.8.2.0/Foreign-Ptr.html#t:Ptr">Ptr</a> <a href="../base-4.8.2.0/Data-Word.html#t:Word8">Word8</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:BufSize">BufSize</a> = <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></li><li class="src short"><a href="#v:bufferSize">bufferSize</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:BufSize">BufSize</a></li><li class="src short"><a href="#v:allocateBuffer">allocateBuffer</a> :: <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:Buffer">Buffer</a></li><li class="src short"><a href="#v:freeBuffer">freeBuffer</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Buffer">Buffer</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:copy">copy</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Buffer">Buffer</a> -&gt; <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:Buffer">Buffer</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:FileId">FileId</a> = <a href="#v:FileId">FileId</a> {<ul class="subs"><li><a href="#v:fileIdPath">fileIdPath</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a></li><li><a href="#v:fileIdFd">fileIdFd</a> :: <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.8.2.0/System-Posix-Types.html#t:Fd">Fd</a></li></ul>}</li><li class="src short"><span class="keyword">type</span> <a href="#t:SendFile">SendFile</a> = <a href="Network-Wai-Handler-Warp-Internal.html#t:FileId">FileId</a> -&gt; <a href="../base-4.8.2.0/Prelude.html#t:Integer">Integer</a> -&gt; <a href="../base-4.8.2.0/Prelude.html#t:Integer">Integer</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> () -&gt; [<a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a>] -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:sendFile">sendFile</a> :: <a href="../network-2.6.2.1/Network-Socket.html#t:Socket">Socket</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:Buffer">Buffer</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:BufSize">BufSize</a> -&gt; (<a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()) -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:SendFile">SendFile</a></li><li class="src short"><a href="#v:readSendFile">readSendFile</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Buffer">Buffer</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:BufSize">BufSize</a> -&gt; (<a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()) -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:SendFile">SendFile</a></li><li class="src short"><a href="#v:warpVersion">warpVersion</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:InternalInfo">InternalInfo</a> = <a href="#v:InternalInfo">InternalInfo</a> {<ul class="subs"><li><a href="#v:threadHandle">threadHandle</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Handle">Handle</a></li><li><a href="#v:timeoutManager">timeoutManager</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Manager">Manager</a></li><li><a href="#v:fdCacher">fdCacher</a> :: <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:MutableFdCache">MutableFdCache</a></li><li><a href="#v:fileInfo">fileInfo</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:FileInfo">FileInfo</a></li><li><a href="#v:dateCacher">dateCacher</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:DateCache">DateCache</a></li></ul>}</li><li class="src short"><span class="keyword">type</span> <a href="#t:HeaderValue">HeaderValue</a> = <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:IndexedHeader">IndexedHeader</a> = <a href="../array-0.5.1.0/Data-Array.html#t:Array">Array</a> <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:HeaderValue">HeaderValue</a>)</li><li class="src short"><a href="#v:requestMaxIndex">requestMaxIndex</a> :: <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:Manager">Manager</a> = <a href="../auto-update-0.1.3/Control-Reaper.html#t:Reaper">Reaper</a> [<a href="Network-Wai-Handler-Warp-Internal.html#t:Handle">Handle</a>] <a href="Network-Wai-Handler-Warp-Internal.html#t:Handle">Handle</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:TimeoutAction">TimeoutAction</a> = <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:Handle">Handle</a></li><li class="src short"><a href="#v:initialize">initialize</a> :: <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:Manager">Manager</a></li><li class="src short"><a href="#v:stopManager">stopManager</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Manager">Manager</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:killManager">killManager</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Manager">Manager</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:withManager">withManager</a> :: <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; (<a href="Network-Wai-Handler-Warp-Internal.html#t:Manager">Manager</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> a) -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> a</li><li class="src short"><a href="#v:register">register</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Manager">Manager</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:TimeoutAction">TimeoutAction</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:Handle">Handle</a></li><li class="src short"><a href="#v:registerKillThread">registerKillThread</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Manager">Manager</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:Handle">Handle</a></li><li class="src short"><a href="#v:tickle">tickle</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Handle">Handle</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:cancel">cancel</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Handle">Handle</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:pause">pause</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Handle">Handle</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:resume">resume</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Handle">Handle</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:TimeoutThread">TimeoutThread</a> = <a href="#v:TimeoutThread">TimeoutThread</a></li><li class="src short"><a href="#v:withFdCache">withFdCache</a> :: <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:MutableFdCache">MutableFdCache</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> a) -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> a</li><li class="src short"><a href="#v:getFd">getFd</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:MutableFdCache">MutableFdCache</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.8.2.0/System-Posix-Types.html#t:Fd">Fd</a>, <a href="Network-Wai-Handler-Warp-Internal.html#t:Refresh">Refresh</a>)</li><li class="src short"><span class="keyword">type</span> <a href="#t:MutableFdCache">MutableFdCache</a> = <a href="../auto-update-0.1.3/Control-Reaper.html#t:Reaper">Reaper</a> FdCache (Hash, FdEntry)</li><li class="src short"><span class="keyword">type</span> <a href="#t:Refresh">Refresh</a> = <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:FileInfo">FileInfo</a> = <a href="#v:FileInfo">FileInfo</a> {<ul class="subs"><li><a href="#v:fileInfoName">fileInfoName</a> :: !<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a></li><li><a href="#v:fileInfoSize">fileInfoSize</a> :: !<a href="../base-4.8.2.0/Prelude.html#t:Integer">Integer</a></li><li><a href="#v:fileInfoTime">fileInfoTime</a> :: <a href="../http-date-0.0.6.1/Network-HTTP-Date.html#t:HTTPDate">HTTPDate</a></li><li><a href="#v:fileInfoDate">fileInfoDate</a> :: <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></li></ul>}</li><li class="src short"><a href="#v:withFileInfoCache">withFileInfoCache</a> :: <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; ((<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:FileInfo">FileInfo</a>) -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> a) -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> a</li><li class="src short"><a href="#v:getInfo">getInfo</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:FileInfo">FileInfo</a></li><li class="src short"><a href="#v:withDateCache">withDateCache</a> :: (<a href="Network-Wai-Handler-Warp-Internal.html#t:DateCache">DateCache</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> a) -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> a</li><li class="src short"><a href="#v:getDate">getDate</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:DateCache">DateCache</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:GMTDate">GMTDate</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:DateCache">DateCache</a> = <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:GMTDate">GMTDate</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:GMTDate">GMTDate</a> = <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:Source">Source</a></li><li class="src short"><a href="#v:recvRequest">recvRequest</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Settings">Settings</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:Connection">Connection</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:InternalInfo">InternalInfo</a> -&gt; <a href="../network-2.6.2.1/Network-Socket-Internal.html#t:SockAddr">SockAddr</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:Source">Source</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="../wai-3.0.5.0/Network-Wai.html#t:Request">Request</a>, <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="../base-4.8.2.0/Data-IORef.html#t:IORef">IORef</a> <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a>), <a href="Network-Wai-Handler-Warp-Internal.html#t:IndexedHeader">IndexedHeader</a>, <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a>)</li><li class="src short"><a href="#v:sendResponse">sendResponse</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Settings">Settings</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:Connection">Connection</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:InternalInfo">InternalInfo</a> -&gt; <a href="../wai-3.0.5.0/Network-Wai.html#t:Request">Request</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:IndexedHeader">IndexedHeader</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="../wai-3.0.5.0/Network-Wai.html#t:Response">Response</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></li></ul></div><div id="interface"><h1 id="g:1">Settings</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Settings" class="def">Settings</a></p><div class="doc"><p>Various Warp server settings. This is purposely kept as an abstract data
 type so that new settings can be added without breaking backwards
 compatibility. In order to create a <code><a href="Network-Wai-Handler-Warp-Internal.html#t:Settings">Settings</a></code> value, use <code><a href="Network-Wai-Handler-Warp.html#v:defaultSettings">defaultSettings</a></code>
 and the various 'set' functions to modify individual fields. For example:</p><pre>setTimeout 20 defaultSettings</pre></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Settings" class="def">Settings</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:settingsPort" class="def">settingsPort</a> :: <a href="Network-Wai-Handler-Warp.html#t:Port">Port</a></dt><dd class="doc"><p>Port to listen on. Default value: 3000</p></dd><dt class="src"><a name="v:settingsHost" class="def">settingsHost</a> :: <a href="Network-Wai-Handler-Warp.html#t:HostPreference">HostPreference</a></dt><dd class="doc"><p>Default value: HostIPv4</p></dd><dt class="src"><a name="v:settingsOnException" class="def">settingsOnException</a> :: <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../wai-3.0.5.0/Network-Wai.html#t:Request">Request</a> -&gt; <a href="../base-4.8.2.0/Control-Exception-Base.html#t:SomeException">SomeException</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</dt><dd class="doc"><p>What to do with exceptions thrown by either the application or server. Default: ignore server-generated exceptions (see <code><a href="Network-Wai-Handler-Warp.html#t:InvalidRequest">InvalidRequest</a></code>) and print application-generated applications to stderr.</p></dd><dt class="src"><a name="v:settingsOnExceptionResponse" class="def">settingsOnExceptionResponse</a> :: <a href="../base-4.8.2.0/Control-Exception-Base.html#t:SomeException">SomeException</a> -&gt; <a href="../wai-3.0.5.0/Network-Wai.html#t:Response">Response</a></dt><dd class="doc"><p>A function to create <code><a href="../wai-3.0.5.0/Network-Wai.html#t:Response">Response</a></code> when an exception occurs.</p><p>Default: 500, text/plain, &quot;Something went wrong&quot;</p><p>Since 2.0.3</p></dd><dt class="src"><a name="v:settingsOnOpen" class="def">settingsOnOpen</a> :: <a href="../network-2.6.2.1/Network-Socket-Internal.html#t:SockAddr">SockAddr</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></dt><dd class="doc"><p>What to do when a connection is open. When <code><a href="../base-4.8.2.0/Data-Bool.html#v:False">False</a></code> is returned, the connection is closed immediately. Otherwise, the connection is going on. Default: always returns <code><a href="../base-4.8.2.0/Data-Bool.html#v:True">True</a></code>.</p></dd><dt class="src"><a name="v:settingsOnClose" class="def">settingsOnClose</a> :: <a href="../network-2.6.2.1/Network-Socket-Internal.html#t:SockAddr">SockAddr</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</dt><dd class="doc"><p>What to do when a connection is close. Default: do nothing.</p></dd><dt class="src"><a name="v:settingsTimeout" class="def">settingsTimeout</a> :: <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></dt><dd class="doc"><p>Timeout value in seconds. Default value: 30</p></dd><dt class="src"><a name="v:settingsManager" class="def">settingsManager</a> :: <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:Manager">Manager</a></dt><dd class="doc"><p>Use an existing timeout manager instead of spawning a new one. If used, <code><a href="Network-Wai-Handler-Warp-Internal.html#v:settingsTimeout">settingsTimeout</a></code> is ignored. Default is <code><a href="../base-4.8.2.0/Data-Maybe.html#v:Nothing">Nothing</a></code></p></dd><dt class="src"><a name="v:settingsFdCacheDuration" class="def">settingsFdCacheDuration</a> :: <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></dt><dd class="doc"><p>Cache duration time of file descriptors in seconds. 0 means that the cache mechanism is not used. Default value: 0</p></dd><dt class="src"><a name="v:settingsFileInfoCacheDuration" class="def">settingsFileInfoCacheDuration</a> :: <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></dt><dd class="doc"><p>Cache duration time of file information in seconds. 0 means that the cache mechanism is not used. Default value: 0</p></dd><dt class="src"><a name="v:settingsBeforeMainLoop" class="def">settingsBeforeMainLoop</a> :: <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</dt><dd class="doc"><p>Code to run after the listening socket is ready but before entering
 the main event loop. Useful for signaling to tests that they can start
 running, or to drop permissions after binding to a restricted port.</p><p>Default: do nothing.</p><p>Since 1.3.6</p></dd><dt class="src"><a name="v:settingsFork" class="def">settingsFork</a> :: ((<span class="keyword">forall</span> a. <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> a -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> a) -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()) -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</dt><dd class="doc"><p>Code to fork a new thread to accept a connection.</p><p>This may be useful if you need OS bound threads, or if
 you wish to develop an alternative threading model.</p><p>Default: void . forkIOWithUnmask</p><p>Since 3.0.4</p></dd><dt class="src"><a name="v:settingsNoParsePath" class="def">settingsNoParsePath</a> :: <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></dt><dd class="doc"><p>Perform no parsing on the rawPathInfo.</p><p>This is useful for writing HTTP proxies.</p><p>Default: False</p><p>Since 2.0.3</p></dd><dt class="src"><a name="v:settingsInstallShutdownHandler" class="def">settingsInstallShutdownHandler</a> :: <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> () -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:settingsServerName" class="def">settingsServerName</a> :: <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></dt><dd class="doc"><p>Default server name if application does not set one.</p><p>Since 3.0.2</p></dd><dt class="src"><a name="v:settingsMaximumBodyFlush" class="def">settingsMaximumBodyFlush</a> :: <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></dt><dd class="doc"><p>See <code>setMaximumBodyFlush</code>.</p><p>Since 3.0.3</p></dd><dt class="src"><a name="v:settingsProxyProtocol" class="def">settingsProxyProtocol</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:ProxyProtocol">ProxyProtocol</a></dt><dd class="doc"><p>Specify usage of the PROXY protocol.</p><p>Since 3.0.5.</p></dd><dt class="src"><a name="v:settingsSlowlorisSize" class="def">settingsSlowlorisSize</a> :: <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></dt><dd class="doc"><p>Size of bytes read to prevent Slowloris protection. Default value: 2048</p><p>Since 3.1.2.</p></dd><dt class="src"><a name="v:settingsHTTP2Enabled" class="def">settingsHTTP2Enabled</a> :: <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></dt><dd class="doc"><p>Whether to enable HTTP2 ALPN/upgrades. Default: True</p><p>Since 3.1.7.</p></dd><dt class="src"><a name="v:settingsLogger" class="def">settingsLogger</a> :: <a href="../wai-3.0.5.0/Network-Wai.html#t:Request">Request</a> -&gt; <a href="../http-types-0.9/Network-HTTP-Types-Status.html#t:Status">Status</a> -&gt; <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.8.2.0/Prelude.html#t:Integer">Integer</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</dt><dd class="doc"><p>A log function. Default: no action.</p><p>Since 3.X.X.</p></dd></dl><div class="clear"></div></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:ProxyProtocol" class="def">ProxyProtocol</a></p><div class="doc"><p>Specify usage of the PROXY protocol.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:ProxyProtocolNone" class="def">ProxyProtocolNone</a></td><td class="doc"><p>See <code>setProxyProtocolNone</code>.</p></td></tr><tr><td class="src"><a name="v:ProxyProtocolRequired" class="def">ProxyProtocolRequired</a></td><td class="doc"><p>See <code>setProxyProtocolRequired</code>.</p></td></tr><tr><td class="src"><a name="v:ProxyProtocolOptional" class="def">ProxyProtocolOptional</a></td><td class="doc"><p>See <code>setProxyProtocolOptional</code>.</p></td></tr></table></div></div><h1 id="g:2">Low level run functions</h1><div class="top"><p class="src"><a name="v:runSettingsConnection" class="def">runSettingsConnection</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Settings">Settings</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="Network-Wai-Handler-Warp-Internal.html#t:Connection">Connection</a>, <a href="../network-2.6.2.1/Network-Socket-Internal.html#t:SockAddr">SockAddr</a>) -&gt; <a href="../wai-3.0.5.0/Network-Wai.html#t:Application">Application</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</p><div class="doc"><p>The connection setup action would be expensive. A good example
 is initialization of TLS.
 So, this converts the connection setup action to the connection maker
 which will be executed after forking a new worker thread.
 Then this calls <code><a href="Network-Wai-Handler-Warp-Internal.html#v:runSettingsConnectionMaker">runSettingsConnectionMaker</a></code> with the connection maker.
 This allows the expensive computations to be performed
 in a separate worker thread instead of the main server loop.</p><p>Since 1.3.5</p></div></div><div class="top"><p class="src"><a name="v:runSettingsConnectionMaker" class="def">runSettingsConnectionMaker</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Settings">Settings</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:Connection">Connection</a>, <a href="../network-2.6.2.1/Network-Socket-Internal.html#t:SockAddr">SockAddr</a>) -&gt; <a href="../wai-3.0.5.0/Network-Wai.html#t:Application">Application</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</p><div class="doc"><p>This modifies the connection maker so that it returns <code><a href="Network-Wai-Handler-Warp-Internal.html#v:TCP">TCP</a></code> for <code><a href="Network-Wai-Handler-Warp-Internal.html#t:Transport">Transport</a></code>
 (i.e. plain HTTP) then calls <code><a href="Network-Wai-Handler-Warp-Internal.html#v:runSettingsConnectionMakerSecure">runSettingsConnectionMakerSecure</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:runSettingsConnectionMakerSecure" class="def">runSettingsConnectionMakerSecure</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Settings">Settings</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="Network-Wai-Handler-Warp-Internal.html#t:Connection">Connection</a>, <a href="Network-Wai-Handler-Warp-Internal.html#t:Transport">Transport</a>), <a href="../network-2.6.2.1/Network-Socket-Internal.html#t:SockAddr">SockAddr</a>) -&gt; <a href="../wai-3.0.5.0/Network-Wai.html#t:Application">Application</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</p><div class="doc"><p>The core run function which takes <code><a href="Network-Wai-Handler-Warp-Internal.html#t:Settings">Settings</a></code>,
 a connection maker and <code><a href="../wai-3.0.5.0/Network-Wai.html#t:Application">Application</a></code>.
 The connection maker can return a connection of either plain HTTP
 or HTTP over TLS.</p><p>Since 2.1.4</p></div></div><div class="top"><p class="src"><a name="v:runServe" class="def">runServe</a> :: <a href="Network-Wai-Handler-Warp.html#t:Port">Port</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:ServeConnection">ServeConnection</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</p><div class="doc"><p>The generalized form of <code><a href="Network-Wai-Handler-Warp.html#v:run">run</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:runServeEnv" class="def">runServeEnv</a> :: <a href="Network-Wai-Handler-Warp.html#t:Port">Port</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:ServeConnection">ServeConnection</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</p><div class="doc"><p>The generalized form of <code><a href="Network-Wai-Handler-Warp.html#v:runEnv">runEnv</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:runServeSettings" class="def">runServeSettings</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Settings">Settings</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:ServeConnection">ServeConnection</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</p><div class="doc"><p>The generalized form of <code><a href="Network-Wai-Handler-Warp.html#v:runSettings">runSettings</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:runServeSettingsSocket" class="def">runServeSettingsSocket</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Settings">Settings</a> -&gt; <a href="../network-2.6.2.1/Network-Socket.html#t:Socket">Socket</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:ServeConnection">ServeConnection</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</p><div class="doc"><p>The generalized form of <code><a href="Network-Wai-Handler-Warp.html#v:runSettingsSocket">runSettingsSocket</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:runServeSettingsConnection" class="def">runServeSettingsConnection</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Settings">Settings</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="Network-Wai-Handler-Warp-Internal.html#t:Connection">Connection</a>, <a href="../network-2.6.2.1/Network-Socket-Internal.html#t:SockAddr">SockAddr</a>) -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:ServeConnection">ServeConnection</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</p><div class="doc"><p>The generalized form of <code><a href="Network-Wai-Handler-Warp-Internal.html#v:runSettingsConnection">runSettingsConnection</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:runServeSettingsConnectionMaker" class="def">runServeSettingsConnectionMaker</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Settings">Settings</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:Connection">Connection</a>, <a href="../network-2.6.2.1/Network-Socket-Internal.html#t:SockAddr">SockAddr</a>) -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:ServeConnection">ServeConnection</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</p><div class="doc"><p>The generalized form of <code><a href="Network-Wai-Handler-Warp-Internal.html#v:runSettingsConnectionMaker">runSettingsConnectionMaker</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:runServeSettingsConnectionMakerSecure" class="def">runServeSettingsConnectionMakerSecure</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Settings">Settings</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="Network-Wai-Handler-Warp-Internal.html#t:Connection">Connection</a>, <a href="Network-Wai-Handler-Warp-Internal.html#t:Transport">Transport</a>), <a href="../network-2.6.2.1/Network-Socket-Internal.html#t:SockAddr">SockAddr</a>) -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:ServeConnection">ServeConnection</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</p><div class="doc"><p>The generalized form of <code><a href="Network-Wai-Handler-Warp-Internal.html#v:runSettingsConnectionMakerSecure">runSettingsConnectionMakerSecure</a></code>.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Transport" class="def">Transport</a></p><div class="doc"><p>What kind of transport is used for this connection?</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:TCP" class="def">TCP</a></td><td class="doc"><p>Plain channel: TCP</p></td></tr><tr><td class="src"><a name="v:TLS" class="def">TLS</a></td><td class="doc"><p>Encrypted channel: TLS or SSL</p></td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:tlsMajorVersion" class="def">tlsMajorVersion</a> :: <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:tlsMinorVersion" class="def">tlsMinorVersion</a> :: <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:tlsNegotiatedProtocol" class="def">tlsNegotiatedProtocol</a> :: <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></dt><dd class="doc"><p>The result of Application Layer Protocol Negociation in RFC 7301</p></dd><dt class="src"><a name="v:tlsChiperID" class="def">tlsChiperID</a> :: <a href="../base-4.8.2.0/Data-Word.html#t:Word16">Word16</a></dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div></div><h1 id="g:3">ServeConnection</h1><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:ServeConnection" class="def">ServeConnection</a> = <a href="Network-Wai-Handler-Warp-Internal.html#t:Connection">Connection</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:InternalInfo">InternalInfo</a> -&gt; <a href="../network-2.6.2.1/Network-Socket-Internal.html#t:SockAddr">SockAddr</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:Transport">Transport</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:Settings">Settings</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</p></div><div class="top"><p class="src"><a name="v:serveDefault" class="def">serveDefault</a> :: <a href="../wai-3.0.5.0/Network-Wai.html#t:Application">Application</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:ServeConnection">ServeConnection</a></p></div><div class="top"><p class="src"><a name="v:serveHTTP2" class="def">serveHTTP2</a> :: <a href="../wai-3.0.5.0/Network-Wai-HTTP2.html#t:HTTP2Application">HTTP2Application</a> -&gt; <a href="../wai-3.0.5.0/Network-Wai.html#t:Application">Application</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:ServeConnection">ServeConnection</a></p></div><h1 id="g:4">Connection</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Connection" class="def">Connection</a></p><div class="doc"><p>Data type to manipulate IO actions for connections.
   This is used to abstract IO actions for plain HTTP and HTTP over TLS.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Connection" class="def">Connection</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:connSendMany" class="def">connSendMany</a> :: [<a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a>] -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</dt><dd class="doc"><p>This is not used at this moment.</p></dd><dt class="src"><a name="v:connSendAll" class="def">connSendAll</a> :: <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</dt><dd class="doc"><p>The sending function.</p></dd><dt class="src"><a name="v:connSendFile" class="def">connSendFile</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:SendFile">SendFile</a></dt><dd class="doc"><p>The sending function for files in HTTP/1.1.</p></dd><dt class="src"><a name="v:connClose" class="def">connClose</a> :: <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</dt><dd class="doc"><p>The connection closing function.</p></dd><dt class="src"><a name="v:connRecv" class="def">connRecv</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Recv">Recv</a></dt><dd class="doc"><p>The connection receiving function. This returns &quot;&quot; for EOF.</p></dd><dt class="src"><a name="v:connRecvBuf" class="def">connRecvBuf</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:RecvBuf">RecvBuf</a></dt><dd class="doc"><p>The connection receiving function. This tries to fill the buffer.
   This returns when the buffer is filled or reaches EOF.</p></dd><dt class="src"><a name="v:connWriteBuffer" class="def">connWriteBuffer</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Buffer">Buffer</a></dt><dd class="doc"><p>The write buffer.</p></dd><dt class="src"><a name="v:connBufferSize" class="def">connBufferSize</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:BufSize">BufSize</a></dt><dd class="doc"><p>The size of the write buffer.</p></dd></dl><div class="clear"></div></div></td></tr></table></div></div><div class="top"><p class="src"><a name="v:socketConnection" class="def">socketConnection</a> :: <a href="../network-2.6.2.1/Network-Socket.html#t:Socket">Socket</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:Connection">Connection</a></p><div class="doc"><p>Creating <code><a href="Network-Wai-Handler-Warp-Internal.html#t:Connection">Connection</a></code> for plain HTTP based on a given socket.</p></div></div><h2 id="g:5">Receive</h2><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Recv" class="def">Recv</a> = <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></p><div class="doc"><p>Type for the action to receive input data</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:RecvBuf" class="def">RecvBuf</a> = <a href="Network-Wai-Handler-Warp-Internal.html#t:Buffer">Buffer</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:BufSize">BufSize</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></p><div class="doc"><p>Type for the action to receive input data with a buffer.
   The result boolean indicates whether or not the buffer is fully filled.</p></div></div><div class="top"><p class="src"><a name="v:makePlainReceiveN" class="def">makePlainReceiveN</a> :: <a href="../network-2.6.2.1/Network-Socket.html#t:Socket">Socket</a> -&gt; <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="Network-Wai-Handler-Warp-Internal.html#t:BufSize">BufSize</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a>)</p><div class="doc"><p>This function returns a receiving function
   based on two receiving functions.
   The returned function efficiently manages received data
   which is initialized by the first argument.
   The returned function may allocate a byte string with malloc().</p></div></div><h2 id="g:6">Buffer</h2><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Buffer" class="def">Buffer</a> = <a href="../base-4.8.2.0/Foreign-Ptr.html#t:Ptr">Ptr</a> <a href="../base-4.8.2.0/Data-Word.html#t:Word8">Word8</a></p><div class="doc"><p>Type for buffer</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:BufSize" class="def">BufSize</a> = <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></p><div class="doc"><p>Type for buffer size</p></div></div><div class="top"><p class="src"><a name="v:bufferSize" class="def">bufferSize</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:BufSize">BufSize</a></p><div class="doc"><p>The default size of the write buffer: 16384 (2^14 = 1024 * 16).
   This is the maximum size of TLS record.
   This is also the maximum size of HTTP/2 frame payload
   (excluding frame header).</p></div></div><div class="top"><p class="src"><a name="v:allocateBuffer" class="def">allocateBuffer</a> :: <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:Buffer">Buffer</a></p><div class="doc"><p>Allocating a buffer with malloc().</p></div></div><div class="top"><p class="src"><a name="v:freeBuffer" class="def">freeBuffer</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Buffer">Buffer</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</p><div class="doc"><p>Releasing a buffer with free().</p></div></div><div class="top"><p class="src"><a name="v:copy" class="def">copy</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Buffer">Buffer</a> -&gt; <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:Buffer">Buffer</a></p><div class="doc"><p>Copying the bytestring to the buffer.
   This function returns the point where the next copy should start.</p></div></div><h2 id="g:7">Sendfile</h2><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:FileId" class="def">FileId</a></p><div class="doc"><p>Data type to abstract file identifiers.
   On Unix, a file descriptor would be specified to make use of
   the file descriptor cache.</p><p>Since: 3.1.0</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:FileId" class="def">FileId</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:fileIdPath" class="def">fileIdPath</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:fileIdFd" class="def">fileIdFd</a> :: <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.8.2.0/System-Posix-Types.html#t:Fd">Fd</a></dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:SendFile" class="def">SendFile</a> = <a href="Network-Wai-Handler-Warp-Internal.html#t:FileId">FileId</a> -&gt; <a href="../base-4.8.2.0/Prelude.html#t:Integer">Integer</a> -&gt; <a href="../base-4.8.2.0/Prelude.html#t:Integer">Integer</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> () -&gt; [<a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a>] -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</p><div class="doc"><p>fileid, offset, length, hook action, HTTP headers</p><p>Since: 3.1.0</p></div></div><div class="top"><p class="src"><a name="v:sendFile" class="def">sendFile</a> :: <a href="../network-2.6.2.1/Network-Socket.html#t:Socket">Socket</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:Buffer">Buffer</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:BufSize">BufSize</a> -&gt; (<a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()) -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:SendFile">SendFile</a></p><div class="doc"><p>Function to send a file based on sendfile() for Linux/Mac/FreeBSD.
   This makes use of the file descriptor cache.
   For other OSes, this is identical to <code><a href="Network-Wai-Handler-Warp-Internal.html#v:readSendFile">readSendFile</a></code>.</p><p>Since: 3.1.0</p></div></div><div class="top"><p class="src"><a name="v:readSendFile" class="def">readSendFile</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Buffer">Buffer</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:BufSize">BufSize</a> -&gt; (<a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()) -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:SendFile">SendFile</a></p><div class="doc"><p>Function to send a file based on pread()/send() for Unix.
   This makes use of the file descriptor cache.
   For Windows, this is emulated by <code>Handle</code>.</p><p>Since: 3.1.0</p></div></div><h1 id="g:8">Version</h1><div class="top"><p class="src"><a name="v:warpVersion" class="def">warpVersion</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a></p><div class="doc"><p>The version of Warp.</p></div></div><h1 id="g:9">Data types</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:InternalInfo" class="def">InternalInfo</a></p><div class="doc"><p>Internal information.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:InternalInfo" class="def">InternalInfo</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:threadHandle" class="def">threadHandle</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Handle">Handle</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:timeoutManager" class="def">timeoutManager</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Manager">Manager</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:fdCacher" class="def">fdCacher</a> :: <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:MutableFdCache">MutableFdCache</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:fileInfo" class="def">fileInfo</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:FileInfo">FileInfo</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:dateCacher" class="def">dateCacher</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:DateCache">DateCache</a></dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:HeaderValue" class="def">HeaderValue</a> = <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></p><div class="doc"><p>The type for header value used with <code>HeaderName</code>.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:IndexedHeader" class="def">IndexedHeader</a> = <a href="../array-0.5.1.0/Data-Array.html#t:Array">Array</a> <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:HeaderValue">HeaderValue</a>)</p><div class="doc"><p>Array for a set of HTTP headers.</p></div></div><div class="top"><p class="src"><a name="v:requestMaxIndex" class="def">requestMaxIndex</a> :: <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></p><div class="doc"><p>The size for <code><a href="Network-Wai-Handler-Warp-Internal.html#t:IndexedHeader">IndexedHeader</a></code> for HTTP Request.
   From 0 to this corresponds to &quot;Content-Length&quot;, &quot;Transfer-Encoding&quot;,
   &quot;Expect&quot;, &quot;Connection&quot;, &quot;Range&quot;, &quot;Host&quot;,
   &quot;If-Modified-Since&quot;, &quot;If-Unmodified-Since&quot; and &quot;If-Range&quot;.</p></div></div><h1 id="g:10">Time out manager</h1><div class="doc"><p>In order to provide slowloris protection, Warp provides timeout handlers. We
 follow these rules:</p><ul><li>A timeout is created when a connection is opened.</li><li>When all request headers are read, the timeout is tickled.</li><li>Every time at least the slowloris size settings number of bytes of the request
   body are read, the timeout is tickled.</li><li>The timeout is paused while executing user code. This will apply to both
   the application itself, and a ResponseSource response. The timeout is
   resumed as soon as we return from user code.</li><li>Every time data is successfully sent to the client, the timeout is tickled.</li></ul></div><h2 id="g:11">Types</h2><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Manager" class="def">Manager</a> = <a href="../auto-update-0.1.3/Control-Reaper.html#t:Reaper">Reaper</a> [<a href="Network-Wai-Handler-Warp-Internal.html#t:Handle">Handle</a>] <a href="Network-Wai-Handler-Warp-Internal.html#t:Handle">Handle</a></p><div class="doc"><p>A timeout manager</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:TimeoutAction" class="def">TimeoutAction</a> = <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</p><div class="doc"><p>An action to be performed on timeout.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Handle" class="def">Handle</a></p><div class="doc"><p>A handle used by <code><a href="Network-Wai-Handler-Warp-Internal.html#t:Manager">Manager</a></code></p></div></div><h2 id="g:12">Manager</h2><div class="top"><p class="src"><a name="v:initialize" class="def">initialize</a> :: <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:Manager">Manager</a></p><div class="doc"><p>Creating timeout manager which works every N micro seconds
   where N is the first argument.</p></div></div><div class="top"><p class="src"><a name="v:stopManager" class="def">stopManager</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Manager">Manager</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</p><div class="doc"><p>Stopping timeout manager with onTimeout fired.</p></div></div><div class="top"><p class="src"><a name="v:killManager" class="def">killManager</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Manager">Manager</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</p><div class="doc"><p>Killing timeout manager immediately without firing onTimeout.</p></div></div><div class="top"><p class="src"><a name="v:withManager" class="def">withManager</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>timeout in microseconds</p></td></tr><tr><td class="src">-&gt; (<a href="Network-Wai-Handler-Warp-Internal.html#t:Manager">Manager</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> a)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> a</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Call the inner function with a timeout manager.</p></div></div><h2 id="g:13">Registration</h2><div class="top"><p class="src"><a name="v:register" class="def">register</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Manager">Manager</a> -&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:TimeoutAction">TimeoutAction</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:Handle">Handle</a></p><div class="doc"><p>Registering a timeout action.</p></div></div><div class="top"><p class="src"><a name="v:registerKillThread" class="def">registerKillThread</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Manager">Manager</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:Handle">Handle</a></p><div class="doc"><p>Registering a timeout action of killing this thread.</p></div></div><h2 id="g:14">Control</h2><div class="top"><p class="src"><a name="v:tickle" class="def">tickle</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Handle">Handle</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</p><div class="doc"><p>Setting the state to active.
   <code><a href="Network-Wai-Handler-Warp-Internal.html#t:Manager">Manager</a></code> turns active to inactive repeatedly.</p></div></div><div class="top"><p class="src"><a name="v:cancel" class="def">cancel</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Handle">Handle</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</p><div class="doc"><p>Setting the state to canceled.
   <code><a href="Network-Wai-Handler-Warp-Internal.html#t:Manager">Manager</a></code> eventually removes this without timeout action.</p></div></div><div class="top"><p class="src"><a name="v:pause" class="def">pause</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Handle">Handle</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</p><div class="doc"><p>Setting the state to paused.
   <code><a href="Network-Wai-Handler-Warp-Internal.html#t:Manager">Manager</a></code> does not change the value.</p></div></div><div class="top"><p class="src"><a name="v:resume" class="def">resume</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:Handle">Handle</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</p><div class="doc"><p>Setting the paused state to active.
   This is an alias to <code><a href="Network-Wai-Handler-Warp-Internal.html#v:tickle">tickle</a></code>.</p></div></div><h2 id="g:15">Exceptions</h2><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:TimeoutThread" class="def">TimeoutThread</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:TimeoutThread" class="def">TimeoutThread</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:TimeoutThread" class="caption collapser" onclick="toggleSection('i:TimeoutThread')">Instances</p><div id="section.i:TimeoutThread" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Text-Show.html#t:Show">Show</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:TimeoutThread">TimeoutThread</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Control-Exception-Base.html#t:Exception">Exception</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:TimeoutThread">TimeoutThread</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h1 id="g:16">File descriptor cache</h1><div class="top"><p class="src"><a name="v:withFdCache" class="def">withFdCache</a> :: <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:MutableFdCache">MutableFdCache</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> a) -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> a</p><div class="doc"><p>Creating <code><a href="Network-Wai-Handler-Warp-Internal.html#t:MutableFdCache">MutableFdCache</a></code> and executing the action in the second
   argument. The first argument is a cache duration in second.</p></div></div><div class="top"><p class="src"><a name="v:getFd" class="def">getFd</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:MutableFdCache">MutableFdCache</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.8.2.0/System-Posix-Types.html#t:Fd">Fd</a>, <a href="Network-Wai-Handler-Warp-Internal.html#t:Refresh">Refresh</a>)</p><div class="doc"><p>Getting <code><a href="../base-4.8.2.0/System-Posix-Types.html#t:Fd">Fd</a></code> and <code><a href="Network-Wai-Handler-Warp-Internal.html#t:Refresh">Refresh</a></code> from the mutable Fd cacher.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:MutableFdCache" class="def">MutableFdCache</a> = <a href="../auto-update-0.1.3/Control-Reaper.html#t:Reaper">Reaper</a> FdCache (Hash, FdEntry)</p><div class="doc"><p>Mutable Fd cacher.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Refresh" class="def">Refresh</a> = <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</p><div class="doc"><p>An action to activate a Fd cache entry.</p></div></div><h1 id="g:17">File information cache</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:FileInfo" class="def">FileInfo</a></p><div class="doc"><p>File information.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:FileInfo" class="def">FileInfo</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:fileInfoName" class="def">fileInfoName</a> :: !<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:fileInfoSize" class="def">fileInfoSize</a> :: !<a href="../base-4.8.2.0/Prelude.html#t:Integer">Integer</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:fileInfoTime" class="def">fileInfoTime</a> :: <a href="../http-date-0.0.6.1/Network-HTTP-Date.html#t:HTTPDate">HTTPDate</a></dt><dd class="doc"><p>Modification time</p></dd><dt class="src"><a name="v:fileInfoDate" class="def">fileInfoDate</a> :: <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></dt><dd class="doc"><p>Modification time in the GMT format</p></dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:FileInfo" class="caption collapser" onclick="toggleSection('i:FileInfo')">Instances</p><div id="section.i:FileInfo" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Eq.html#t:Eq">Eq</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:FileInfo">FileInfo</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Text-Show.html#t:Show">Show</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:FileInfo">FileInfo</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:withFileInfoCache" class="def">withFileInfoCache</a> :: <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; ((<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:FileInfo">FileInfo</a>) -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> a) -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> a</p><div class="doc"><p>Creating a file information cache
   and executing the action in the second argument.
   The first argument is a cache duration in second.</p></div></div><div class="top"><p class="src"><a name="v:getInfo" class="def">getInfo</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:FileInfo">FileInfo</a></p><div class="doc"><p>Getting the file information corresponding to the file.</p></div></div><h1 id="g:18">Date</h1><div class="top"><p class="src"><a name="v:withDateCache" class="def">withDateCache</a> :: (<a href="Network-Wai-Handler-Warp-Internal.html#t:DateCache">DateCache</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> a) -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> a</p><div class="doc"><p>Creating <code><a href="Network-Wai-Handler-Warp-Internal.html#t:DateCache">DateCache</a></code> and executing the action.</p></div></div><div class="top"><p class="src"><a name="v:getDate" class="def">getDate</a> :: <a href="Network-Wai-Handler-Warp-Internal.html#t:DateCache">DateCache</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:GMTDate">GMTDate</a></p><div class="doc"><p>Getting current <code><a href="Network-Wai-Handler-Warp-Internal.html#t:GMTDate">GMTDate</a></code> based on <code><a href="Network-Wai-Handler-Warp-Internal.html#t:DateCache">DateCache</a></code>.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:DateCache" class="def">DateCache</a> = <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Network-Wai-Handler-Warp-Internal.html#t:GMTDate">GMTDate</a></p><div class="doc"><p>The type of the cache of the Date header value.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:GMTDate" class="def">GMTDate</a> = <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></p><div class="doc"><p>The type of the Date header value.</p></div></div><h1 id="g:19">Request and response</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Source" class="def">Source</a></p><div class="doc"><p>Type for input streaming.</p></div></div><div class="top"><p class="src"><a name="v:recvRequest" class="def">recvRequest</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Network-Wai-Handler-Warp-Internal.html#t:Settings">Settings</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:Connection">Connection</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:InternalInfo">InternalInfo</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="../network-2.6.2.1/Network-Socket-Internal.html#t:SockAddr">SockAddr</a></td><td class="doc"><p>Peer's address.</p></td></tr><tr><td class="src">-&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:Source">Source</a></td><td class="doc"><p>Where HTTP request comes from.</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="../wai-3.0.5.0/Network-Wai.html#t:Request">Request</a>, <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="../base-4.8.2.0/Data-IORef.html#t:IORef">IORef</a> <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a>), <a href="Network-Wai-Handler-Warp-Internal.html#t:IndexedHeader">IndexedHeader</a>, <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a>)</td><td class="doc"><p><code><a href="../wai-3.0.5.0/Network-Wai.html#t:Request">Request</a></code> passed to <code><a href="../wai-3.0.5.0/Network-Wai.html#t:Application">Application</a></code>,
 how many bytes remain to be consumed, if known
 <code><a href="Network-Wai-Handler-Warp-Internal.html#t:IndexedHeader">IndexedHeader</a></code> of HTTP request for internal use,
 Body producing action used for flushing the request body</p></td></tr></table></div><div class="doc"><p>Receiving a HTTP request from <code><a href="Network-Wai-Handler-Warp-Internal.html#t:Connection">Connection</a></code> and parsing its header
   to create <code><a href="../wai-3.0.5.0/Network-Wai.html#t:Request">Request</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:sendResponse" class="def">sendResponse</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Network-Wai-Handler-Warp-Internal.html#t:Settings">Settings</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:Connection">Connection</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:InternalInfo">InternalInfo</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="../wai-3.0.5.0/Network-Wai.html#t:Request">Request</a></td><td class="doc"><p>HTTP request.</p></td></tr><tr><td class="src">-&gt; <a href="Network-Wai-Handler-Warp-Internal.html#t:IndexedHeader">IndexedHeader</a></td><td class="doc"><p>Indexed header of HTTP request.</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></td><td class="doc"><p>source from client, for raw response</p></td></tr><tr><td class="src">-&gt; <a href="../wai-3.0.5.0/Network-Wai.html#t:Response">Response</a></td><td class="doc"><p>HTTP response including status code and response header.</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></td><td class="doc"><p>Returing True if the connection is persistent.</p></td></tr></table></div><div class="doc"><p>Sending a HTTP response to <code><a href="Network-Wai-Handler-Warp-Internal.html#t:Connection">Connection</a></code> according to <code><a href="../wai-3.0.5.0/Network-Wai.html#t:Response">Response</a></code>.</p><p>Applications/middlewares MUST provide a proper <code><a href="../http-types-0.9/Network-HTTP-Types-Header.html#t:ResponseHeaders">ResponseHeaders</a></code>.
   so that inconsistency does not happen.
   No header is deleted by this function.</p><p>Especially, Applications/middlewares MUST provide a proper
   Content-Type. They MUST NOT provide
   Content-Length, Content-Range, and Transfer-Encoding
   because they are inserted, when necessary,
   regardless they already exist.
   This function does not insert Content-Encoding. It's middleware's
   responsibility.</p><p>The Date and Server header is added if not exist
   in HTTP response header.</p><p>There are three basic APIs to create <code><a href="../wai-3.0.5.0/Network-Wai.html#t:Response">Response</a></code>:</p><dl><dt><code><a href="../wai-3.0.5.0/Network-Wai.html#v:responseBuilder">responseBuilder</a></code> :: <code><a href="../http-types-0.9/Network-HTTP-Types-Status.html#t:Status">Status</a></code> -&gt; <code><a href="../http-types-0.9/Network-HTTP-Types-Header.html#t:ResponseHeaders">ResponseHeaders</a></code> -&gt; <code><a href="../blaze-builder-0.4.0.1/Blaze-ByteString-Builder.html#t:Builder">Builder</a></code> -&gt; <code><a href="../wai-3.0.5.0/Network-Wai.html#t:Response">Response</a></code></dt><dd>HTTP response body is created from <code><a href="../blaze-builder-0.4.0.1/Blaze-ByteString-Builder.html#t:Builder">Builder</a></code>.
     Transfer-Encoding: chunked is used in HTTP/1.1.</dd><dt><code><a href="../wai-3.0.5.0/Network-Wai.html#v:responseStream">responseStream</a></code> :: <code><a href="../http-types-0.9/Network-HTTP-Types-Status.html#t:Status">Status</a></code> -&gt; <code><a href="../http-types-0.9/Network-HTTP-Types-Header.html#t:ResponseHeaders">ResponseHeaders</a></code> -&gt; <code><a href="../wai-3.0.5.0/Network-Wai.html#t:StreamingBody">StreamingBody</a></code> -&gt; <code><a href="../wai-3.0.5.0/Network-Wai.html#t:Response">Response</a></code></dt><dd>HTTP response body is created from <code><a href="../blaze-builder-0.4.0.1/Blaze-ByteString-Builder.html#t:Builder">Builder</a></code>.
     Transfer-Encoding: chunked is used in HTTP/1.1.</dd><dt><code><a href="../wai-3.0.5.0/Network-Wai.html#v:responseRaw">responseRaw</a></code> :: (<code><a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a></code> <code><a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></code> -&gt; (<code><a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></code> -&gt; <code><a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a></code> ()) -&gt; <code><a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a></code> ()) -&gt; <code><a href="../wai-3.0.5.0/Network-Wai.html#t:Response">Response</a></code> -&gt; <code><a href="../wai-3.0.5.0/Network-Wai.html#t:Response">Response</a></code></dt><dd>No header is added and no Transfer-Encoding: is applied.</dd><dt><code><a href="../wai-3.0.5.0/Network-Wai.html#v:responseFile">responseFile</a></code> :: <code><a href="../http-types-0.9/Network-HTTP-Types-Status.html#t:Status">Status</a></code> -&gt; <code><a href="../http-types-0.9/Network-HTTP-Types-Header.html#t:ResponseHeaders">ResponseHeaders</a></code> -&gt; <code><a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a></code> -&gt; <code><a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a></code> <code><a href="../wai-3.0.5.0/Network-Wai.html#t:FilePart">FilePart</a></code> -&gt; <code><a href="../wai-3.0.5.0/Network-Wai.html#t:Response">Response</a></code></dt><dd>HTTP response body is sent (by sendfile(), if possible) for GET method.
     HTTP response body is not sent by HEAD method.
     Content-Length and Content-Range are automatically
     added into the HTTP response header if necessary.
     If Content-Length and Content-Range exist in the HTTP response header,
     they would cause inconsistency.
     &quot;Accept-Ranges: bytes&quot; is also inserted.</dd></dl><p>Applications are categorized into simple and sophisticated.
     Sophisticated applications should specify <code><a href="../base-4.8.2.0/Data-Maybe.html#v:Just">Just</a></code> to
     <code><a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a></code> <code><a href="../wai-3.0.5.0/Network-Wai.html#t:FilePart">FilePart</a></code>. They should treat the conditional request
     by themselves. A proper <code>Status</code> (200 or 206) must be provided.</p><p>Simple applications should specify <code><a href="../base-4.8.2.0/Data-Maybe.html#v:Nothing">Nothing</a></code> to
     <code><a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a></code> <code><a href="../wai-3.0.5.0/Network-Wai.html#t:FilePart">FilePart</a></code>. The size of the specified file is obtained
     by disk access or from the file infor cache.
     If-Modified-Since, If-Unmodified-Since, If-Range and Range
     are processed. Since a proper status is chosen, <code>Status</code> is
     ignored. Last-Modified is inserted.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>